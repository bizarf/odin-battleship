(()=>{"use strict";var t={d:(e,r)=>{for(var s in r)t.o(r,s)&&!t.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:r[s]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)};t.d({},{U:()=>h,y:()=>i});const e=class{constructor(t){this.name=t,this.turn=!1,this.board=new class{constructor(){this.board=[],this.makeBoard(),this.ships=[]}makeBoard(){for(let t=0;t<8;t++){this.board[t]=[];for(let e=0;e<8;e++)this.board[t][e]={ship:!1,hit:!1,missedShot:!1}}}placeShip(t,e,r,s){if(!0===this.isPlaceable(t,s,e)){const a=new class{constructor(t,e){this.name=t,this.length=e,this.hits=0}hit(){return this.hits+=1}isSunk(){return this.length===this.hits}}(r,s);if(this.ships.push(a),"hor"===e)for(let e=0;e<s;e++)this.board[t[0]][t[1]+e].ship=r;if("vert"===e)for(let e=0;e<s;e++)this.board[t[0]+e][t[1]].ship=r}return!1}isPlaceable(t,e,r){const s=[];if("hor"===r){if(t[1]+e-1>7)return!1;for(let r=0;r<e;r++)!1===this.board[t[0]][t[1]+r].ship&&s.push(this.board[t[0]][t[1]+r].ship)}if("vert"===r){if(t[0]+e-1>7)return!1;for(let r=0;r<e;r++)!1===this.board[t[0]+r][t[1]].ship&&s.push(this.board[t[0]+1][t[1]].ship)}return s.length==e}receiveAttack(t){const e=this.board[t[0]][t[1]];if(!0===e.hit||!0===e.missedShot)return!1;if(0!=e.ship){const t=this.getShipIndex(e.ship);return this.ships[t].hit(),e.hit=!0,!0}return!1===e.ship?(e.missedShot=!0,!0):void 0}getShipIndex(t){return this.ships.map((t=>t.name)).indexOf(t)}checkAllShipStatus(){return this.ships.map((t=>t.isSunk())).every((t=>{if(!0===t)return!0}))}}}computerPlay(){const t=[Math.floor(8*Math.random()),Math.floor(8*Math.random())];!0!==i.board.receiveAttack(t)?!1===i.board.receiveAttack(t)&&this.computerPlay():i.board.receiveAttack(t)}randomShipPlacement(){Math.floor(Math.random()*["hor","vert"].length),Math.floor(8*Math.random()),Math.floor(8*Math.random()),console.log(this.board.isPlaceable([0,0],5,"hor"))}endTurn(){!0===this.turn&&(this.turn=!1)}startTurn(){!1===this.turn&&(this.turn=!0)}},r=document.querySelector(".playerBoard"),s=document.querySelector(".computerBoard");function a(){document.querySelectorAll(".playerBoardSquare").forEach((t=>{const e=parseInt(t.dataset.pos[0]),r=parseInt(t.dataset.pos[2]),s=i.board.board[e][r];0!=s.ship&&t.classList.add("ship"),!0===s.hit&&(t.classList.remove("ship"),t.classList.add("shipStrike")),!0===s.missedShot&&t.classList.add("missedShot")}))}function o(){document.querySelectorAll(".computerBoardSquare").forEach((t=>{const e=parseInt(t.dataset.pos[0]),r=parseInt(t.dataset.pos[2]),s=h.board.board[e][r];!0===s.hit&&t.classList.add("shipStrike"),!0===s.missedShot&&t.classList.add("missedShot")}))}const i=new e("human"),h=new e("computer");(()=>{for(let t=0;t<8;t++)for(let e=0;e<8;e++){const s=document.createElement("div");s.classList="playerBoardSquare",s.dataset.pos=[t,e],r.appendChild(s)}})(),(()=>{for(let t=0;t<8;t++)for(let e=0;e<8;e++){const r=document.createElement("div");r.classList="computerBoardSquare",r.dataset.pos=[t,e],s.appendChild(r)}})(),document.querySelectorAll(".playerBoardSquare").forEach((t=>t.addEventListener("click",(()=>{const e=[parseInt(t.dataset.pos[0]),parseInt(t.dataset.pos[2])];console.log(e)})))),document.querySelectorAll(".computerBoardSquare").forEach((t=>t.addEventListener("click",(()=>{const e=[parseInt(t.dataset.pos[0]),parseInt(t.dataset.pos[2])];!1===h.board.checkAllShipStatus()&&(h.board.receiveAttack(e),o()),!1===i.board.checkAllShipStatus()&&(h.computerPlay(),a()),!0===h.board.checkAllShipStatus()&&alert("a winner is you"),!0===i.board.checkAllShipStatus()&&alert("a loser is you")})))),i.board.placeShip([0,0],"hor","carrier",5),i.board.placeShip([2,4],"hor","cruiser",3),i.board.placeShip([2,0],"vert","battleship",4),i.board.placeShip([4,2],"vert","submarine",3),i.board.placeShip([4,4],"hor","destroyer",2),h.board.placeShip([0,0],"hor","carrier",5),h.board.placeShip([2,4],"hor","cruiser",3),h.board.placeShip([2,0],"vert","battleship",4),h.board.placeShip([4,2],"vert","submarine",3),h.board.placeShip([4,4],"hor","destroyer",2),console.log(i.board.board),a(),o()})();