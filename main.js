(()=>{"use strict";var e={d:(t,s)=>{for(var a in s)e.o(s,a)&&!e.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:s[a]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};e.d({},{U:()=>c,y:()=>o});const t=class{constructor(e){this.name=e,this.turn=!1,this.board=new class{constructor(){this.board=[],this.makeBoard(),this.ships=[],this.carrierPlaced=!1,this.battleshipPlaced=!1,this.cruiserPlaced=!1,this.submarinePlaced=!1,this.destroyerPlaced=!1}makeBoard(){for(let e=0;e<8;e++){this.board[e]=[];for(let t=0;t<8;t++)this.board[e][t]={ship:!1,hit:!1,missedShot:!1}}}resetBoard(){this.board=[],this.makeBoard()}placeShip(e,t,s,a){if(!0===this.isPlaceable(e,a,t)){const r=new class{constructor(e,t){this.name=e,this.length=t,this.hits=0}hit(){return this.hits+=1}isSunk(){return this.length===this.hits}}(s,a);if(this.ships.push(r),"hor"===t)for(let t=0;t<a;t++)this.board[e[0]][e[1]+t].ship=s;if("vert"===t)for(let t=0;t<a;t++)this.board[e[0]+t][e[1]].ship=s}return!1}isPlaceable(e,t,s){const a=[];if("hor"===s){if(e[1]+t-1>7)return!1;for(let s=0;s<t;s++)!1===this.board[e[0]][e[1]+s].ship&&a.push(this.board[e[0]][e[1]+s].ship)}if("vert"===s){if(e[0]+t-1>7)return!1;for(let s=0;s<t;s++)!1===this.board[e[0]+s][e[1]].ship&&a.push(this.board[e[0]+s][e[1]].ship)}return a.length==t}receiveAttack(e){const t=this.board[e[0]][e[1]];if(!0===t.hit||!0===t.missedShot)return!1;if(0!=t.ship){const e=this.getShipIndex(t.ship);return this.ships[e].hit(),t.hit=!0,!0}return!1===t.ship?(t.missedShot=!0,!0):void 0}getShipIndex(e){return this.ships.map((e=>e.name)).indexOf(e)}checkAllShipStatus(){return this.ships.map((e=>e.isSunk())).every((e=>{if(!0===e)return!0}))}placeShipTeamRandomly(){const e=["hor","vert"],t=Math.floor(2*Math.random()),s=[Math.floor(8*Math.random()),Math.floor(8*Math.random())];!1===this.carrierPlaced&&this.placeShipPieceRandomly(s,5,e,t,"carrier"),!1===this.battleshipPlaced&&this.placeShipPieceRandomly(s,4,e,t,"battleship"),!1===this.cruiserPlaced&&this.placeShipPieceRandomly(s,3,e,t,"cruiser"),!1===this.submarinePlaced&&this.placeShipPieceRandomly(s,3,e,t,"submarine"),!1===this.destroyerPlaced&&this.placeShipPieceRandomly(s,2,e,t,"destroyer")}placeShipPieceRandomly(e,t,s,a,r){!1===this.isPlaceable(e,t,s[a])&&this.placeShipTeamRandomly(),!0===this.isPlaceable(e,t,s[a])&&(this.placeShip(e,s[a],r,t),this.shipPlacedTrue(r))}shipPlacedTrue(e){switch(e){case"carrier":this.carrierPlaced=!0;break;case"battleship":this.battleshipPlaced=!0;break;case"cruiser":this.cruiserPlaced=!0;break;case"submarine":this.submarinePlaced=!0;break;case"destroyer":this.destroyerPlaced=!0}}}}computerPlay(){const e=[Math.floor(8*Math.random()),Math.floor(8*Math.random())];!0!==o.board.receiveAttack(e)?!1===o.board.receiveAttack(e)&&this.computerPlay():o.board.receiveAttack(e)}endTurn(){!0===this.turn&&(this.turn=!1)}startTurn(){!1===this.turn&&(this.turn=!0)}},s=document.querySelector(".playerBoard"),a=document.querySelector(".computerBoard");function r(){document.querySelectorAll(".playerBoardSquare").forEach((e=>{const t=parseInt(e.dataset.pos[0]),s=parseInt(e.dataset.pos[2]),a=o.board.board[t][s];0!=a.ship&&e.classList.add("ship"),!0===a.hit&&(e.classList.remove("ship"),e.classList.add("shipStrike")),!0===a.missedShot&&e.classList.add("missedShot")}))}function i(){document.querySelectorAll(".computerBoardSquare").forEach((e=>{const t=parseInt(e.dataset.pos[0]),s=parseInt(e.dataset.pos[2]),a=c.board.board[t][s];!0===a.hit&&e.classList.add("shipStrike"),!0===a.missedShot&&e.classList.add("missedShot")}))}const o=new t("human"),c=new t("computer");(()=>{for(let e=0;e<8;e++)for(let t=0;t<8;t++){const a=document.createElement("div");a.classList="playerBoardSquare",a.dataset.pos=[e,t],s.appendChild(a)}})(),(()=>{for(let e=0;e<8;e++)for(let t=0;t<8;t++){const s=document.createElement("div");s.classList="computerBoardSquare",s.dataset.pos=[e,t],a.appendChild(s)}})(),document.querySelectorAll(".playerBoardSquare").forEach((e=>e.addEventListener("click",(()=>{const t=[parseInt(e.dataset.pos[0]),parseInt(e.dataset.pos[2])];console.log(t)})))),o.board.placeShipTeamRandomly(),c.board.placeShipTeamRandomly(),r(),i();const h=document.querySelector("#startBtn");h.addEventListener("click",(()=>{(()=>{const e=document.querySelectorAll(".computerBoardSquare"),t=document.querySelectorAll(".playerBoardSquare");e.forEach((s=>s.addEventListener("click",(()=>{const a=[parseInt(s.dataset.pos[0]),parseInt(s.dataset.pos[2])];!1===c.board.checkAllShipStatus()&&(c.board.receiveAttack(a),i(),!0===c.board.checkAllShipStatus()&&(console.log("a winner is you"),e.forEach((e=>e.classList.add("disableBoards"))),t.forEach((e=>e.classList.add("disableBoards"))),i(),r())),!1===o.board.checkAllShipStatus()&&(c.computerPlay(),r(),!0===o.board.checkAllShipStatus()&&(console.log("a loser is you"),e.forEach((e=>e.classList.add("disableBoards"))),t.forEach((e=>e.classList.add("disableBoards"))),r(),i()))}))))})(),h.disabled=!0}))})();